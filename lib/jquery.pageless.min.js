(function(i){var n=!1,h=!n,j,k=n,p,g=".pageless",o="scroll"+g,a="resize"+g,f={container:window,currentPage:1,distance:100,pagination:".pagination",params:{},url:location.href,loaderImage:"/images/load.gif"};i.pageless=function(r){i.isFunction(r)?f.call():q(r)};var c=function(){return f.loaderHtml||'<div id="pageless-loader" style="display:none;text-align:center;width:100%;">  <div class="msg" style="color:#e9e9e9;font-size:2em"></div>  <img src="'+f.loaderImage+'" alt="loading more results" style="margin:10px auto" /></div>'};var q=function(r){if(f.inited){return}f.inited=h;if(r){i.extend(f,r)}container=f.container;$container=i(container);if(f.pagination){i(f.pagination).remove()}b()};i.fn.pageless=function(t){var s=i(this),r=i(t.loader,s);q(t);j=s;if(t.loader&&r.length){p=r}else{p=i(c());s.append(p);if(!t.loaderHtml){i("#pageless-loader .msg").html(t.loaderMsg)}}};var e=function(r){(k=r)?(p&&p.fadeIn("normal")):(p&&p.fadeOut("normal"))};var d=function(){return(container===window)?i(document).height()-$container.scrollTop()-$container.height():$container[0].scrollHeight-$container.scrollTop()-$container.height()};var m=function(){$container.unbind(g)};var b=function(){$container.bind(o+" "+a,l).trigger(o)};var l=function(){if(f.totalPages<=f.currentPage){m();if(f.end){f.end.call()}return}if(!k&&(d()<f.distance)){e(h);f.currentPage++;i.extend(f.params,{page:f.currentPage});i.get(f.url,f.params,function(r){i.isFunction(f.scrape)?f.scrape(r):r;p?p.before(r):j.append(r);e(n);if(f.complete){f.complete.call()}})}}})(jQuery);